\documentclass[aspectratio=169,14pt]{beamer}

\usepackage[utf8]{inputenc}
\usepackage[main=russian,english]{babel}
\usepackage[T1]{fontenc}
\usepackage[labelformat=empty]{caption}
\usepackage{multimedia}
\usepackage{xcolor}
\usepackage{setspace}

\usetheme{Singapore}

\definecolor{urlcolor}{HTML}{799B03} % цвет гиперссылок
\hypersetup{urlcolor=urlcolor, colorlinks=true}

\graphicspath{{../Images/}}

\title{Периферия}

\begin{document}

% Слайд Периферия
\begin{frame}{Периферия}
    \begin{itemize}
        \item Компьютерная система состоит из трех основных компонентов:
        \begin{itemize}
            \item процессор
            \item память
            \item устройства ввода/вывода
        \end{itemize}
        \item Компьютер представляет собой корпус с
        материнской платой (центральная интегральная схема)
        \item Материнская плата содержит процессор, разъемы
        для подключения модулей памяти и различные микросхемы поддержки
        \item Все эти компоненты соединены шиной, на которой
        размещены разъемы для подключения устройств (плат) ввода/вывода
    \end{itemize}
\end{frame}

% Слайд Логическая схема компьютера
\begin{frame}{Логическая схема компьютера}
    \begin{itemize}
        \begin{footnotesize}
        \begin{spacing}{0.8}
        \item Устройство ввода/вывода состоит из двух частей:
        \textbf{контроллер} (электроника)
        и непосредственно \textbf{физическое устройство}
        \item Обычно контроллер располагается на материнской
        плате, но иногда бывает встроен в устройство
        \item Контроллер управляет устройством ввода/вывода и
        регулирует доступ к шине
        \item Контроллер вызывает прерывание, когда заканчивает операцию
        ввода/вывода (проверка ошибок и завершение процесса ввода/вывода)
        \item Арбитр шины~--- специальная микросхема, определяющая порядок
        (последовательность) доступа к шине процессора и контроллеров
        (шина одна, а устройств много).
        Преимущество обычно имеют устройства ввода/вывода, поскольку
        нежелательно прерывать работу движущихся частей
        \end{spacing}
        \end{footnotesize}
    \end{itemize}
    \begin{figure}
        \centering
        \includegraphics[height=2.5cm, keepaspectratio]{PCLogicalSchema.png}
    \end{figure}
\end{frame}

% Слайд Параллельная и последовательная шины
\begin{frame}{Параллельная и последовательная шины}
    \begin{itemize}
        \item Параллельная шина: за один цикл (такт) работы шины передаются
        сразу несколько бит по нескольким физическим проводникам
        (сигнальным линиям)
        \begin{itemize}
            \item ~<<+>>: высокая скорость
            \item ~<<+>>: простота устройств
            \item ~<<->>: большое количество проводов
            \item ~<<->>: ограничения по частоте передачи из-за необходимость
            синхронизации проводников (явление перекоса) и их взаимного
            влияния
        \end{itemize}
        \item Последовательный: биты передаются по одному проводнику
        (сигнальной линии) друг за другом
        \begin{itemize}
            \item ~<<->>: низкая скорость при одинаковой частоте передачи
            \item ~<<+>>: потенциал повышения частоты передачи
        \end{itemize}
    \end{itemize}
\end{frame}

% Слайд Механизмы взаимодействия программ с устройствами
\begin{frame}{Механизмы взаимодействия процессора (программ) с устройствами}
    \begin{itemize}
        \item Регистры I/O (отображенные на пространство I/O или
        на память)
        \item Прерывания, сигнализируемые устройствами по линиям
        (IRQx~--- ISA, INTx\#~--- PCI) или сообщениям MSI (PCI)
        \item Область системной памяти, доступная активным
        устройствам-мастерам шины (DMA)
    \end{itemize}
\end{frame}

% Слайд способы взаимодействия программ с устройствами
\begin{frame}{Способы взаимодействия программ с устройствами}
    \begin{itemize}
        \item PIO (программно-управляемый обмен)~--- инструкции I/O
        (INS/OUTS с префиксом REP посылки группы данных); физическое
        взаимодействие происходит в момент выполнения инструкций.
        Простая интерфейсная часть, но высокая нагрузка на ЦПУ.
        \item DMA (прямой доступ к памяти) – обмен между памятью и
        устройством без участия ЦПУ
        \item Прерывания – сигнал от устройства к ЦПУ о событиях,
        требующих некоторых действий. Иногда прерывания заменяют
        программно-управляемым опросом устройств (по таймеру)
    \end{itemize}
\end{frame}

% Слайд Параллельный интерфейс
\begin{frame}{Параллельный интерфейс - LPT-порт}
    \begin{spacing}{0.8}
        \begin{itemize}
            \item LPT-порт (Line PrinTer~--- построчный принтер)~--- изначально
            использовался для подключения принтера
            \item 8-битная шина данных, 5-битная шина сигналов состояния
            и 4-битная шина управляющих сигналов
            \item В LPT-порте используются логические уровни сигнала,
            что ограничивает допустимую длину кабеля из-за невысокой
            помехозащищенности
            \item С программной точки зрения LPT-порт представляет собой
            набор регистров, расположенных в пространстве ввода-вывода
        \end{itemize}
        \includegraphics[height=1.5cm, keepaspectratio]{ParallelPort.png}
    \end{spacing}
\end{frame}

% Слайд Вывод байта в LPT
\begin{frame}{Процедура вывода байта в LPT}
    \begin{footnotesize}
        \begin{itemize}
            \item Запись байта в регистр данных
            \item Чтение из регистра состояния и проверка
            готовности устройства. Этот шаг зацикливается до
            получения готовности или до срабатывания
            программного тайм-аута
            \item По получению готовности выводом в регистр
            управления устанавливается строб данных (строб-сигнал
            о готовности порта к передаче данных), а следующим
            выводом байта данных строб снимается
            \item Главный недостаток: невысокая скорость обмена при значительной
            загрузке процессора
            \item В последующих модификациях интерфейса (режим EPP) всю
            работу, связанную с задержками, стробами и проверками берет
            на себя аппаратная часть хост-контроллера
            \item Сложно осуществлять ввод
        \end{itemize}
    \end{footnotesize}
\end{frame}

% Слайд Последовательный интерфейс - СОМ-порт
\begin{frame}{Последовательный интерфейс~--- СОМ-порт}
    \begin{columns}
        \begin{column}{0.7\textwidth}
            \begin{spacing}{0.8}
                \begin{footnotesize}
                    \begin{itemize}
                        \item Универсальный внешний последовательный интерфейс~--- СОМ-порт
                        (Communications Port~--- коммуникационный порт, RS-232),
                        обеспечивает асинхронный обмен
                        \item Основное назначение~--- подключение коммуникационного
                        оборудования (например, модема) для связи с другими компьютерами,
                        сетями и периферийными устройствами. К порту могут непосредственно
                        подключаться и периферийные устройств с последовательным
                        интерфейсом: принтеры, плоттеры, терминалы, мыши,
                        непосредственная связь двух компьютеров, также подключают
                        электронные ключи
                        \item ~<<Классический>> СОМ-порт позволял осуществлять обмен
                        данными только программно-управляемым способом, при этом для
                        пересылки каждого байта процессору нужно выполнить несколько
                        инструкций
                    \end{itemize}
                \end{footnotesize}
            \end{spacing}
        \end{column}
        \begin{column}{0.3\textwidth}
            \begin{figure}
                \centering
                \includegraphics[height=3cm, keepaspectratio]{COMPort.png}
                \caption{\footnotesize{Разъем COM-порта}}
            \end{figure}
        \end{column}
    \end{columns}
\end{frame}

% Слайд Назначение сигналов COM-порта
\begin{frame}{Назначение сигналов COM-порта}
    \begin{tiny}
        \begin{spacing}{0.8}
            \begin{itemize}
                \item \textbf{PG (Protected Ground)}~--- защитная земля, соединяется с
                корпусом устройства и экраном кабеля
                \item \textbf{SG (Signal Ground)}~--- сигнальная (схемная) земля,
                относительно которой действуют уровни сигналов
                \item \textbf{TD (Transmit Data)}~--- последовательные данные)~--- выход
                передатчика
                \item \textbf{RD (Receive Data)}~--- последовательные данные)~--- вход
                приемника
                \item \textbf{RTS (Request To Send)}~--- выход запроса передачи данных:
                состояние <<включено>> уведомляет модем о наличии у терминала
                данных для передачи. В полудуплексном режиме используется для
                управления направлением)~--- состояние <<включено>> служит
                сигналом модему на переключение в режим передачи
                \item \textbf{CIS (Clear To Send)}~--- вход разрешения терминалу
                передавать данные. Состояние <<выключено>> запрещает передачу
                данных. Сигнал используется для аппаратного управления
                потоками данных
                \item \textbf{DSR (Data Set Ready)}~--- вход сигнала готовности от
                аппаратуры передачи данных (модем в рабочем режиме подключен к
                каналу и закончил действия по согласованию с аппаратурой на
                противоположном конце канала)
                \item \textbf{DTR (Data Terminal Ready)}~--- выход сигнала готовности
                терминала к обмену данными. Состояние <<включено>> поддерживает
                коммутируемый канал в состоянии соединения
                \item \textbf{DCD (Data Carrier Detected)}~--- вход сигнала обнаружения
                несущей удаленного модема
                \item \textbf{RI (Ring Indicator)}~--- вход индикатора вызова (звонка). В коммутируемом канале этим сигналом модем сигнализирует о принятии вызова
            \end{itemize}
        \end{spacing}
    \end{tiny}
\end{frame}

% Слайд Пример управляющих сигналов COM-порта
\begin{frame}{Назначение сигналов COM-порта}
    \begin{tiny}
        \begin{spacing}{0.8}
            \begin{itemize}
                \item Установкой DTR компьютер указывает на желание использовать
                модем.
                \item Установкой DSR модем сигнализирует о своей готовности и
                установлении соединения.
                \item Сигналом RTS компьютер запрашивает разрешение на
                передачу и заявляет о своей готовности принимать данные от модема.
                \item Сигналом CTS модем уведомляет о своей готовности к приему
                данных от компьютера и передаче их в линию.
                \item Снятием CTS модем сигнализирует о невозможности дальнейшего
                приема (например, буфер заполнен)~--- компьютер должен
                приостановить передачу данных.
                \item Сигналом CTS модем разрешает компьютеру продолжить
                передачу (в буфере появилось место).
                \item Снятие RTS может означать как заполнение буфера
                компьютера (модем должен приостановить передачу данных
                в компьютер), так и отсутствие данных для передачи в модем.
                Обычно в этом случае модем прекращает пересылку данных
                в компьютер.
                \item Модем подтверждает снятие RTS сбросом CTS.
                \item Компьютер повторно устанавливает RTS для возобновления
                передачи.
                \item Модем подтверждает готовность к этим действиям.
                \item Компьютер указывает на завершение обмена.
                \item Модем отвечает подтверждением.
                \item Компьютер снимает DTR, что обычно является сигналом на
                разрыв соединения (<<повесить трубку>>).
                \item Модем сбросом DSR сигнализирует о разрыве соединения.
            \end{itemize}
        \end{spacing}
    \end{tiny}
\end{frame}

% Слайд Прямой доступ к памяти (DMA)
\begin{frame}{Прямой доступ к памяти (DMA)}
    \begin{itemize}
        \item DMA (Direct Memory Access)~--- метод обмена данными
        периферийного устройства без участия процессора
        \item Контроллер DMA~--- специальная микросхема, которая может
        получать доступ к системной шине независимо от центрального
        процессора
        \item Контроллер DMA, способный выполнять несколько операций
        параллельно, называется многоканальным
    \end{itemize}
\end{frame}

% Слайд Прямой доступ к памяти (DMA)
\begin{frame}{Пример использования DMA для НГМД}
    \begin{figure}
        \centering
        \includegraphics[height=6.6cm, keepaspectratio]{DMAFloppyDiskExample.png}
    \end{figure}
\end{frame}

% Слайд Contiguous DMA
\begin{frame}{Contiguous DMA}
    \begin{spacing}{0.8}
        \begin{itemize}
            \item Выделяется один буфер достаточно большого размера в
            оперативной памяти
            \item Физический адрес (адрес на шине) этого буфера
            записывается в регистр устройства
            \item Во время того, как приходят данные на устройство,
            контроллер устройства инициирует передачу данных по каналу DMA.
            \item После того, как буфер полностью заполнен, контроллер
            устройства инициирует прерывание, чтобы сообщить центральному
            процессору, что буфер следует передать операционной системе
            \item Драйвер операционной системы обрабатывает прерывание
            и передает полученные данные из буфера далее по стеку
            устройств операционной системы
        \end{itemize}
    \end{spacing}
\end{frame}

% Слайд Scatter write/gather read DMA
\begin{frame}{Scatter write/gather read DMA}
    \begin{footnotesize}
    \begin{itemize}
        \begin{spacing}{0.8}
        \item Сложно выделить большой участок свободной физической памяти
        (из-за фрагментированности и страничной организации)
        \item Использование нескольких участков памяти, каждый из
        которых описывается дескриптором
        \item Дескриптор DMA буфера
        \begin{itemize}
            \begin{footnotesize}
                \item Адрес участка ОЗУ (адрес на шине), который
                предназначен для передачи DMA
                \item Размер описываемого участка ОЗУ
                \item Опциональные флаги и другие специфические
                аргументы
                \item Адрес следующего дескриптора в памяти
            \end{footnotesize}
        \end{itemize}
        \item Алгоритм Scatter/gather DMA
        \begin{itemize}
            \begin{tiny}
            \item Драйвер операционной системы выделяет и
            инициализирует дескрипторы DMA буферов (запрос к
            операционной системе необходим для получения
            физического адреса памяти по его логическому адресу)
            \item Драйвер выделяет DMA буферы (участки ОЗУ для
            передачи DMA) и записывает необходимую информацию о
            них в дескрипторы
            \item Устройство, по мере возникновения потребности,
            заполняет DMA буферы и после того, как заполнен один
            или несколько буферов, инициирует прерывание
            \item Драйвер ОС просматривает все дескрипторы DMA
            буферов, определяет какие из них были заполнены
            контроллером устройства, пересылает данные из буфера
            далее по стеку устройств и помечает буфер как готовый
            к передаче DMA
            \end{tiny}
        \end{itemize}
    \end{spacing}
    \end{itemize}
    \end{footnotesize}
\end{frame}

% Слайд Шина ISA
\begin{frame}{Шина ISA}
    \begin{columns}
        \begin{column}{0.75\textwidth}
            \begin{itemize}
                \begin{footnotesize}
                    \item Компьютерная шина (computer bus) в архитектуре компьютера~---
                    подсистема, служащая для передачи сигналов (данных) между функциональными
                    блоками компьютера
                    \item В устройстве шины можно различить механический,
                    электрический (физический) и логический (управляющий) уровни
                    \item ISA (Industry Standard Architecture): 8- или 16-разрядная
                    шина ввода-вывода IBM PC-совместимых компьютеров
                    \item Служит для подключения плат расширения стандарта ISA
                    \item Частота 8 МГц, скорость до 4 Мбайт/c (два такта на байт)
                    \item 1984 г.~--- удвоена разрядность данных, увеличилось число
                    линий прерывания и каналов DMA
                \end{footnotesize}
            \end{itemize}
        \end{column}
        \begin{column}{0.25\textwidth}
            \includegraphics[height=6.8cm, keepaspectratio]{ISAMountingBracket.png}
        \end{column}
    \end{columns}
\end{frame}

% Слайд Шина EISA
\begin{frame}{Шина EISA}
    \begin{itemize}
        \item EISA (Extended Industry Standard Architecture): 32-разрядная,
        подключение более одного процессора
        \item Частота 8МГц, пиковая производительность около 33Мбайт/c,
        реальная~--- около 20 Мбайт/с
        \item Возможности по автоматическому распределению ресурсов
        \item Bus mastering~--- возможность устройствам <<подключаться>>
        к шине для начала транзакции. Появляется возможность устройствам
        взаимодействовать друг с другом
        \item Burst Mode~--- передача данных без выполнения действий
        для начала транзакции
    \end{itemize}
\end{frame}

% Слайд Шина VESA Local Bus
\begin{frame}{Шина VESA Local Bus}
    \begin{itemize}
        \item VESA (Video Electronics Standards Association) Local
        Bus~--- локальная шина для решения проблем <<узкого>> места
        производительности графического интерфейса
        \item Частота 25-40МГц (на частоте процессора), 32-х
        разрядная
        \item Предоставляет доступ устройствам (в первую очередь~---
        графическому контроллеру) доступ к шине процессора и памяти
        с минимумом промежуточной логики.
        \item Работает совместно с ISA, обрабатывает DMA и отображение
        портов ввода/вывода на память (ISA обрабатывает прерывания и
        порты ввода/вывода
        \item Использовалась, в основном, с процессорами 80386 и 80486
    \end{itemize}
\end{frame}

% Слайд Шина PCI
\begin{frame}{Шина PCI}
    \begin{itemize}
        \begin{footnotesize}
            \item PCI (Peripheral Component Interconnect)~--- открытый
            стандарт, 1992 год
            \item 32-х и 64-х разрядная, 33-66МГц, 133-533~Мбайт/с,
            мультиплексированная
            \item Децентрализованная шина, любое устройство может
            стать инициатором транзакции. Используется арбитраж с
            отдельной логикой
            \item Транзакция состоит из 1 или 2 циклов адреса и одного
            или многих циклов данных. Транзакция с многими циклами данных
            называется пакетной (burst)
            \item Используется для сопряжения шин с разными скоростями
            (например, шина CPU и ISA)~-- мост
            \item Поддержка кэширования
            \begin{itemize}
                \begin{footnotesize}
                    \item posted write: данные принимаются, отправляется
                    ответ <<сделано>> , после этого данные записываются
                    \item write combining: несколько запросов posted write
                    с подряд идущими адресами объединяются в одну
                    <<взрывную>> транзакцию
                    \item prefetching: выборка сразу большого диапазона
                    адресов одной <<взрывной>> транзакцией в кэш моста,
                    дальнейшие операции без обращения к шине
                \end{footnotesize}
           \end{itemize}
        \end{footnotesize}
    \end{itemize}
\end{frame}

% Слайд Архитектура компьютера с шиной PCI
\begin{frame}{Архитектура компьютера с шиной PCI}
    \begin{figure}
        \centering
        \includegraphics[height=6.6cm, keepaspectratio]{BusCompPentium.png}
    \end{figure}
\end{frame}

% Слайд Автоконфигурирование устройств PCI
\begin{frame}{Автоконфигурирование устройств PCI}
    \begin{itemize}
        \item PCI-устройства являются самонастраиваемыми (plug-and-play)
        \item После старта компьютера операционная система (или BIOS)
        обследует конфигурационное пространство PCI (достаточно знать
        номер шины PCI) каждого устройства и распределяет ресурсы
        \item Каждое устройство может затребовать до шести диапазонов
        в адресном пространстве памяти или I/O
        \item Устройства могут содержать код в своем ПЗУ для исполнения
        на процессоре
    \end{itemize}
\end{frame}

% Слайд Прерывания на шине PCI
\begin{frame}{Прерывания на шине PCI}
    \begin{itemize}
        \begin{footnotesize}
            \item Прерывания обрабатываются специальным контроллером
            (коммутатором)~--- микросхемой
            \item ISA~--- прерывание возникает при перепаде сигнала из 0 в 1,
            поэтому одна линия~--- одно прерывание
            \item PCI~--- активный запрос прерывания~--- 0. Выходы разных
            устройств объединяются элементом <<И>>. Пока есть 0 на линии,
            последовательно вызываются обработчики прерывания, которые
            проверяют принадлежность прерывания и сбрасывают выход
            прерывания своего устройства
            \item Четыре линии~--- запас для многофункциональных устройств
        \end{footnotesize}
        \includegraphics[height=3cm, keepaspectratio]{PCIInterrupt.png}
    \end{itemize}
\end{frame}

% Слайд Шина AGP
\begin{frame}{Шина AGP}
    \begin{itemize}
        \item AGP (Accelerated Graphic Port)~--- порт ускоренной
        графики~--- был введен для подключения графических адаптеров
        с 3D-акселераторами
        \item Адаптер содержит:
        \begin{itemize}
            \item акселератор~--- специализированный графический процессор;
            \item локальную память, используемую как видеопамять и как
            локальное ОЗУ графического процессора;
            \item управляющие и конфигурационные регистры, доступные
            как локальному, так и центральному процессорам.
        \end{itemize}
        \item Основная идея AGP заключается в предоставлении
        акселератору максимально быстрого доступа к системной памяти
    \end{itemize}
\end{frame}

% Слайд Отличительные особенности AGP
\begin{frame}{Отличительные особенности AGP}
    \begin{itemize}
        \item Конвейеризация обращений к памяти
        \item Умноженная (2х, 4х, 8х) частота передачи данных
        \item ~<<Внеполосная>> подача команд, обеспеченная
        демультиплексированием шин адреса и данных. Шина адреса~---8~линий;
        команда, адрес и длина передаются за несколько тактов

        \includegraphics[height=3cm, keepaspectratio]{AGPPCIMemoryAccess.png}
    \end{itemize}
\end{frame}

% Слайд Набор шин в компьютере c процессором Pentium 4
\begin{frame}{Набор шин в компьютере c процессором Pentium~4}
    \begin{figure}
        \centering
        \includegraphics[height=6.6cm, keepaspectratio]{BusCompPentium4.png}
    \end{figure}
\end{frame}

% Слайд Шина PCI-E
\begin{frame}{Шина PCI-E}
    \begin{itemize}
        \item PCI Express~--- шинное соединение заменено
        на двухточечные последовательные соединения с
        использованием коммутатора
        \item PCI Express (PCI Express Link)~--- это пара встречных
        симплексных каналов, соединяющих два компонента. По этим
        каналам передаются пакеты, несущие команды и данные
        транзакций, сообщения и управляющие посылки
        \item Управление качеством обслуживания
        \item Корневой комплекс~--- соединяет ввод/вывод с
        процессором и памятью; имеет один или более портов PCI-E
    \end{itemize}
\end{frame}

% Слайд Топология PCI-E
\begin{frame}{Топология PCI-E}
    \begin{figure}
        \centering
        \includegraphics[height=6.6cm, keepaspectratio]{PCIETopology.png}
    \end{figure}
\end{frame}

% Слайд Шина USB
\begin{frame}{Шина USB}
    \begin{itemize}
        \begin{footnotesize}
        \item Universal Serial Bus~--- универсальная последовательная
        шина, 1994-1995 г.г.
        \item Мотивация
        \begin{itemize}
        \begin{footnotesize}
            \item Расширение функциональности компьютера: для подключения
            различных устройств использовались разные интерфейсы,
            хотелось заменить на единый интерфейс
            \item Подключение мобильного телефона
            \item Простота для пользователей
        \end{footnotesize}
        \end{itemize}
        \item Требования
        \begin{itemize}
        \begin{footnotesize}
            \item Отсутствие переключателей и перемычек для настройки
            \item Отсутствие необходимости открывать компьютер
            для добавления устройства
            \item Один тип кабеля на все устройства
            \item Питание через соединительный кабель
            \item Подключение большого числа устройств
            \item Поддержка устройств реального времени
            \item Добавление устройств по время работы компьютера без необходимости его перезагрузки
        \end{footnotesize}
        \end{itemize}
        \end{footnotesize}
    \end{itemize}
\end{frame}

% Слайд Топология шины USB
\begin{frame}{Топология шины USB}
    \begin{itemize}
        \item Логическая топология USB~--- звезда
        \item Шина строго ориентирована, имеются физически
        разные разъемы <<к устройству>> и <<к хосту>>
        \item Хост (USB-контроллер)~--- чаще всего микросхема на
        материнской плате компьютера
        \item Периферийным устройством может быть разветвитель
        (хаб, HUB)
    \end{itemize}
    \begin{figure}
        \centering
        \includegraphics[height=3cm, keepaspectratio]{USBLogicalPhysicalTopology.png}
    \end{figure}
\end{frame}

% Слайд Логическое устройство USB
\begin{frame}{Логическое устройство USB}
    \begin{itemize}
        \begin{footnotesize}
        \begin{spacing}{0.8}
        \item Логическое устройство USB представляет собой набор
        независимых конечных точек (Endpoint, \textbf{EP})
        \item Каждому логическому устройству USB назначается
        свой адрес (1-127), уникальный на данной шине USB.
        \item Каждая конечная точка логического устройства
        идентифицируется своим номером (0-15) и направлением
        передачи (\textbf{IN}~--- передача к хосту, \textbf{OUT}~---от
        хоста). Например, точки \textbf{IN4} и \textbf{OUT4}
        представляют собой разные конечные точки, с которыми
        могут общаться приложения
        \item Набор конечных точек зависит от устройства. Всякое
        устройство USB обязательно имеет двунаправленную конечную
        точку 0 (\textbf{EP0}), через которую осуществляется его
        общее управление.
        \item Для прикладных целей используются конечные точки с
        номерами 1-15 (1-2 для низкоскоростных устройств).
        \item Адрес устройства, номер и направление конечной точки
        однозначно идентифицируют приемник или источник информации
        при обмене хост-контроллера с устройствами USB. Каждая конечная
        точка имеет набор характеристик, описывающих поддерживаемый тип
        передачи данных (изохронные данные, массивы, прерывания,
        управляющие передачи), размер пакета, требования к частоте
        обслуживания.
        \end{spacing}
        \end{footnotesize}
    \end{itemize}
\end{frame}

% Слайд Коммуникационные каналы USB
\begin{frame}{Коммуникационные каналы USB}
    \begin{itemize}
        \begin{footnotesize}
        \begin{spacing}{0.8}
        \item Совокупность конечной точки и структур данных в ядре ОС
        называется каналом
        \item Управляющий канал предназначен для обмена с устройством
        короткими пакетами <<вопрос-ответ>>. Любое устройство имеет
        управляющий канал 0, который позволяет программному
        обеспечению ОС прочитать краткую информацию об устройстве, в
        том числе коды производителя и модели, используемые для
        выбора драйвера, а также список других оконечных точек.
        \item Канал прерывания позволяет доставлять короткие пакеты
        и в обоих направлениях, без получения на них ответа/подтверждения,
        но с гарантией времени доставки~--- пакет будет доставлен
        не позже, чем через $N$ миллисекунд. Используется в
        устройствах ввода (клавиатуры/мыши/джойстики).
        \item Изохронный канал позволяет доставлять пакеты без
        гарантии доставки и без ответов/подтверждений, но с
        гарантированной скоростью доставки в $N$ пакетов на один
        период шины (1~кГц у low и full speed, 8~МГц у high speed).
        Используется для передачи аудио- и видеоинформации.
        \item Поточный канал дает гарантию доставки каждого пакета,
        поддерживает автоматическую приостановку передачи данных
        по нежеланию устройства (переполнение или опустошение буфера),
        но не дает гарантий скорости и задержки доставки (принтеры,
        сканеры).
        \end{spacing}
        \end{footnotesize}
    \end{itemize}
\end{frame}

% Слайд Пакетная передача в USB
\begin{frame}{Пакетная передача в USB}
    \begin{itemize}
        \begin{footnotesize}
        \begin{spacing}{0.9}
            \item Время шины делится на периоды.
            \item В начале периода контроллер передает всей шине пакет «начало периода».
            \item Далее в течение периода передаются пакеты прерываний, потом изохронные в требуемом количестве, в оставшееся время в периоде передаются управляющие пакеты и в последнюю очередь поточные.
            \item Активной стороной шины всегда является контроллер, передача пакета данных от устройства к контроллеру реализована как короткий вопрос контроллера и длинный, содержащий данные, ответ устройства.
            \item Расписание движения пакетов для каждого периода шины создается совместным усилием аппаратуры контроллера и ПО драйвера
        \end{spacing}
        \end{footnotesize}
        \includegraphics[height=3cm, keepaspectratio]{USBPackets.png}
    \end{itemize}
\end{frame}
\end{document}